/**
 * Splits new lines of text into separate divs
 *
 * ### Options:
 * - `width` string The width of the box. By default, it tries to use the
 *	 element's width. If you don't define a width, there's no way to split it
 *	 by lines!
 *	- `tag` string The tag to wrap the lines in
 *	- `keepHtml` boolean Whether or not to try and preserve the html within
 *	 the element. Default is true
 *
 *	@param options object The options object
 *	@license MIT License (http://www.opensource.org/licenses/mit-license.php)
 */(function(e){function t(e){return e.clone().css({position:"absolute"})}function n(t){var i=[],s;for(var o=0;o<t.length;o++){if(t[o].nodeType==3)s=r(t[o].textContent||t[o].toString());else{var u=e(t[o]).clone();s=n(u.contents());for(var a in s)u.empty(),s[a]=u.html(s[a]).wrap("<p></p>").parent().html()}for(var f in s)i.push(s[f])}return i}function r(e){return e.split(/\s+/)}function i(e,t,n){var r="<"+e+">",i="</"+e+">",s=t?"<"+t+">":"",o=t?"</"+t+">":"";return console.log(n,s),[r,s,n,o,i].join("")}e.fn.splitLines=function(s){var o={width:"auto",tag:"div",wrap:"",keepHtml:!0};s&&e.extend(o,s);var u=t(this),a=this.contents(),f=this.text();this.append(u),u.text("42");var l=u.height()+2;u.empty();var c=t(u);o.width!=="auto"&&c.width(o.width),this.append(c);var h=o.keepHtml?n(a):r(f),p;for(var d=0;d<h.length;d++){var v=c.html();c.html(v+h[d]+" ");if(c.html()==p){p="",u.append(i(o.tag,o.wrap,c.html())),c.html("");continue}c.height()>l&&(p=c.html(),c.html(v),u.append(i(o.tag,o.wrap,c.html())),c.html(""),d--)}u.append(i(o.tag,o.wrap,c.html())),this.html(u.html())}})(jQuery);